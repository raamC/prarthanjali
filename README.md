<h1 align="center">
Prarthanjali
</h1>
<h2 align="center">
A shared effort to explain and preserve our bhajans
</h2>

# Development

1. clone the repo
1. `npm i`
1. `npm run start`
1. Head to http://localhost:8000

# Deployment

`npm run deploy`

[Uses `gh-pages` to deploy to Github pages](https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/how-gatsby-works-with-github-pages/). This adds a commit to the `gh-pages` branch.

Hosted site is currently https://raamc.github.io/prarthanjali.

# To add a new bhajan

1. Create a new json file in `./content`
2. Update the list in `gatsby-node.js` to make sure it is loaded
3. Update the list in `bhajans.js` to make sure it is discoverable

Each bhajan is described in a json file in `/content`. This json file has the shape of

```
{
    "title": "Hanuman Chalisa",
    "url": "hanuman-chalisa",
    "youtubeLinks": [
        "https://www.youtube.com/embed/AETFvQonfV8",
        "https://www.youtube.com/embed/9ca5_p87c6o",
        "https://www.youtube.com/embed/M9Qg_0nFaGc"
    ],
    "sections": [
        {
            "transliteration": "Shree Guru Charan Saroj Raja, Nij Mana Mukuru Sudhari",
            "translation": "After cleansing the mirror of my mind with the pollen dust of holy Guru's lotus feet"
        },
        ...
    ]
}
```

These can be generated by hand, but there's also a helper in `../prarthanajali-content-prep`. Note this sits outside of the github repo.

`gatsyb-node.js` uses a list of bhajans and the `bhajan-template.js` to create all of the required pages and their URLs.
